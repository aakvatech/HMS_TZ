{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2021-03-24 17:09:09.930314",
 "custom_format": 0,
 "default_print_language": "en",
 "disabled": 1,
 "doc_type": "Patient Appointment",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "format_data": "[{\"fieldname\": \"print_heading_template\", \"fieldtype\": \"Custom HTML\", \"options\": \"<hr>\\n<div class=\\\"print-heading\\\">\\n    <h2 class=\\\"text-center\\\">Itemized Bill</h2>\\n</div>\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Patient Information\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"patient\", \"print_hide\": 0, \"label\": \"Patient\"}, {\"fieldname\": \"patient_name\", \"print_hide\": 0, \"label\": \"Patient Name\"}, {\"fieldname\": \"inpatient_record\", \"print_hide\": 0, \"label\": \"Inpatient Record\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"appointment_type\", \"print_hide\": 0, \"label\": \"Appointment Type\"}, {\"fieldname\": \"appointment_date\", \"print_hide\": 0, \"label\": \"Date\"}, {\"fieldtype\": \"Section Break\", \"label\": \"Insurance Or Company Informatiom\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"insurance_company_name\", \"print_hide\": 0, \"label\": \"Insurance Company Name\"}, {\"fieldname\": \"authorization_number\", \"print_hide\": 0, \"label\": \"Authorization Number\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"insurance_subscription\", \"print_hide\": 0, \"label\": \"Insurance Subscription\"}, {\"fieldtype\": \"Section Break\", \"label\": \"\"}, {\"fieldtype\": \"Column Break\"}, {\"fieldname\": \"_custom_html\", \"print_hide\": 0, \"label\": \"Custom HTML\", \"fieldtype\": \"HTML\", \"options\": \"<br><br>\\n<table border=1 style=\\\"width: 100%; border-collapse: collapse; border: 1px grey; margin-bottom: 10px;\\\">\\n    <COLGROUP>\\n        <COL WIDTH=\\\"2%\\\">\\n        <COL WIDTH=\\\"20%\\\">\\n        <COL WIDTH=\\\"38%\\\">\\n        <COL WIDTH=\\\"10%\\\">\\n        <COL WIDTH=\\\"15%\\\">\\n        <COL WIDTH=\\\"15%\\\">\\n        \\n    </COLGROUP>\\n    <THEAD style=\\\"background-color: darkgray;\\\">\\n        <TR>\\n            <TH style=\\\"text-align: center;\\\">&nbsp;</TH>\\n            <TH style=\\\"text-align: center;\\\">Category</TH>\\n            <TH style=\\\"text-align: center;\\\">Description</TH>\\n            <TH style=\\\"text-align: center;\\\">Qty</TH>\\n            <TH style=\\\"text-align: center;\\\">Rate</TH>\\n            <TH style=\\\"text-align: center;\\\">Amount</TH>\\n            \\n        </TR>\\n    </THEAD>\\n    {% set total = [0] %}\\n    \\n    {% set cons_items = frappe.db.get_all(\\\"Healthcare Insurance Claim\\\", {'name': frappe.db.get_value('Patient Encounter', {'appointment' : doc.name, 'is_not_billable' : 0}, 'insurance_claim')}, ['service_item', 'price_list_rate', 'quantity']) %}\\n    {% for item in cons_items %}\\n    {% set amount = item.price_list_rate * item.quantity %}\\n    {% set total = total.append(total.pop() + amount) %}\\n        <TR>\\n            <TD style=\\\"text-align: center;\\\">{{ loop.index }}</TD>\\n            <TD style=\\\"text-align: left;\\\">{{ frappe.db.get_value('Item', item.service_item, 'item_group') }}</TD>\\n            <TD style=\\\"text-align: left;\\\">{{ item.service_item }}</TD>\\n            <TD style=\\\"text-align: center;\\\">{{ item.quantity|int }}</TD>\\n            <TD style=\\\"text-align: right;\\\">{{ frappe.utils.fmt_money(item.price_list_rate, precision=2) }}</TD>\\n            <TD style=\\\"text-align: right;\\\">{{ frappe.utils.fmt_money(item.price_list_rate * item.quantity, precision=2) }}</TD>\\n        </TR>\\n    {% endfor %}\\n    {% set encouter_list = frappe.db.get_all(\\\"Patient Encounter\\\", {'appointment' : doc.name }, ['name']) %}\\n    {% set encouter_string =  (encouter_list[:encouter_list|length]|join(\\\",\\\",attribute=\\\"name\\\")) %}\\n    {% set claim_list = frappe.db.get_all(\\\"Healthcare Service Order\\\", filters={'order_group': ['in', encouter_string]}, fields=['insurance_claim'], order_by='creation desc') %}\\n    {% set claim_string  = (claim_list[:claim_list|length]|join(\\\",\\\",attribute=\\\"insurance_claim\\\")) %}\\n    {% set claim_items = frappe.db.get_all(\\\"Healthcare Insurance Claim\\\", filters={'name': ['in', claim_string]}, fields=['name', 'service_item', 'price_list_rate', 'quantity'], order_by='name asc') %}\\n    {% for item in claim_items %}\\n    {% set amount = item.price_list_rate * item.quantity %}\\n    {% set total = total.append(total.pop() + amount) %}\\n        <TR>\\n            <TD style=\\\"text-align: center;\\\">{{ loop.index }}</TD>\\n            <TD style=\\\"text-align: left;\\\">{{ frappe.db.get_value('Item', item.service_item, 'item_group') }}</TD>\\n            <TD style=\\\"text-align: left;\\\">{{ item.service_item }}</TD>\\n            <TD style=\\\"text-align: center;\\\">{{ item.quantity|int }}</TD>\\n            <TD style=\\\"text-align: right;\\\">{{ frappe.utils.fmt_money(item.price_list_rate, precision=2) }}</TD>\\n            <TD style=\\\"text-align: right;\\\">{{ frappe.utils.fmt_money(amount, precision=2) }}</TD>\\n        </TR>\\n    {% endfor %}\\n    <TR>\\n        <TD style=\\\"text-align: center;\\\">&nbsp;</TD>\\n        <TD style=\\\"text-align: left;\\\" colspan=\\\"4\\\">TOTAL</TD>\\n        <TD style=\\\"text-align: right;\\\">{{ frappe.utils.fmt_money(total[0], precision=2) }}</TD>\\n        \\n    </TR>\\n</table>\"}]",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2021-04-07 16:41:40.994322",
 "modified_by": "info@aakvatech.com",
 "module": "Hms Tz",
 "name": "Non-NHIF Itemized Bill",
 "owner": "av-dev2@aakvatech.com",
 "print_format_builder": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}